import subprocess
import socket
from pathlib import Path
# import chess

word = "hello world"
bstr = "11111111 11011000 11111111 11011011 00000000 01000011 00000000 00011100 00010100 00010101 00011001 00010101 00010010 00011100 00011001 00010111 00011001 00100000 00011110 00011100 00100010 00101011 01000111 00101110 00101011 00100111 00100111 00101011 01010111 00111110 01000010 00110100 01000111 01100111 01011011 01101101 01101011 01100101 01011011 01100100 01100010 01110010 10000000 10100100 10001011 01110010 01111001 10011011 01111011 01100010 01100100 10001110 11000010 10010000 10011011 10101001 10101110 10110111 10111001 10110111 01101110 10001001 11001001 11010111 11000111 10110010 11010110 10100100 10110100 10110111 10110000 11111111 11011011 00000000 01000011 00000001 00011110 00100000 00100000 00101011 00100101 00101011 01010100 00101110 00101110 01010100 10110000 01110101 01100100 01110101 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 10110000 11111111 11000000 00000000 00010001 00001000 00000000 10101000 00000001 00101100 00000011 00000001 00100010 00000000 00000010 00010001 00000001 00000011 00010001 00000001 11111111 11000100 00000000 00011001 00000000 00000001 00000000 00000011 00000001 00000001 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000001 00000011 00000100 00000010 00000101 11111111 11000100 00000000 00101010 00010000 00000001 00000000 00000010 00000001 00000011 00000011 00000010 00000110 00000010 00000011 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000001 00000010 00000011 00000100 00010001 00110001 00010010 00100001 01000001 01010001 01110001 00010011 00100010 00110010 01100001 10000001 10100001 00110011 10110001 01000010 01100010 10010001 11111111 11000100 00000000 00011000 00000001 00000001 00000001 00000001 00000001 00000001 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000100 00000011 00000010 00000001 11111111 11000100 00000000 00100000 00010001 00000001 00000000 00000011 00000001 00000000 00000010 00000011 00000000 00000011 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000001 00000010 00010001 00000011 00010010 00100001 00100010 00110001 01000001 01000010 01010001 01110001 11111111 11011010 00000000 00001100 00000011 00000001 00000000 00000010 00010001 00000011 00010001 00000000 00111111 00000000 11110010 10000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000111 01111000 11110001 11001110 01001110 10101101 10111100 01000110 11101110 00011110 11100011 11001101 11111100 00000000 01111000 11110100 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000111 01011000 11101001 11010111 01111000 10101111 10101001 00011110 11011110 01001100 11100111 10110110 10101101 00110101 00111010 01110001 01000100 11111001 10110111 01110110 01111100 11110100 11101000 11001011 00110001 11100010 01111011 11000011 01110010 10001101 01010101 00111010 10110001 11110101 01000111 00110101 01010011 01111010 01111100 01111111 11000100 10111100 11101111 11110011 11011001 11111101 01100011 00110111 00000100 11001010 11001101 11000000 00000100 10001000 00000001 00100000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00001101 00111010 01001010 01110110 10011011 11001111 10011110 11010000 11001100 11011101 10000110 11010101 10110110 00111000 11101001 11110001 11011011 01100110 10111100 10100011 01101100 11000111 10110100 11001100 01010111 11010010 11000010 01100011 01111000 11011010 01111000 00000101 00101000 11011110 01110110 01001010 01111100 00111011 11001101 01100111 11000011 10001101 11011010 11110101 01111000 11110111 10101100 01011110 00111100 01110110 10010110 01000100 01110111 10101111 10001100 11100010 11111010 01011011 11001010 10111010 01101110 10010100 00001110 01011101 10100100 00000000 01001000 10000100 10000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00001001 10101101 01100110 11010110 10001010 11000111 00110010 00001011 11110100 10110100 11101111 00110111 10011111 01101000 01011011 01101100 00111011 01011011 10101111 00010100 11110100 11011011 11010011 11000100 10101100 10101101 01100010 10010101 10001010 11000111 00010000 10010101 01110001 01001000 10001000 11000100 00110110 11101001 00110011 01101101 10000111 00110101 10110100 11001111 01101011 01000111 01001101 10111101 00011101 00000011 10100111 00010010 10001001 10001000 10110100 01001100 01001111 00010010 11110011 10101111 01001001 10100101 11100110 10110011 11100001 11101001 00110011 01101010 11110001 11101111 01011000 10111100 01111000 11101101 00101100 11111010 11010111 01100011 01011010 11110001 10110110 01001110 01111111 01101100 10000000 00100110 01011000 01000010 01010001 00001001 00000010 00010010 10001000 01001000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00001101 00111010 01011100 01111100 11011110 01111101 10100001 01000101 00101011 00110111 10110100 01010110 00111001 10010110 11111010 11000100 01010110 10110001 00010001 11000100 00110101 11100101 01011101 10011101 01100001 11011010 11111001 00011000 10010000 00010100 10100100 00000101 01010110 11001111 10001110 10110011 10110100 11011011 01111111 01100111 01110100 10111101 01101111 00011011 11010110 01110111 10000111 10011110 01010001 00111110 10011101 01001101 01100110 00100011 01100110 00011101 00100010 01100010 00100110 00100110 00100111 10001001 01001000 11110101 11001011 11001101 11001001 01001001 11000111 01111001 10101100 11111000 01110010 11011001 10101010 11000111 11010101 01011110 10111000 11100110 10111100 11111011 00110010 00100011 10111101 01111100 01100111 00010111 11110011 10110111 10010101 01110100 00000001 11001011 10110001 00100000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000011 10111100 01110100 11111000 10010111 10001010 11111111 00000000 11010010 00100011 01011110 01001100 11100100 01101010 11111101 00101110 00111101 10101011 00110111 10011110 01100111 10000110 10000100 01000100 01101101 00011011 01000111 00001001 01011001 01011000 11110001 10001100 01000001 01101011 01111001 01001110 10001010 00110101 00111001 00100110 10110101 10001010 11000111 00110011 11111101 00101111 01100001 11010100 01001110 11111001 10101101 11110110 11101100 11100111 10100100 11100101 01011101 11110001 10101110 11011001 01011010 01110001 11011110 01110001 11011110 00101101 00011111 10011000 11110101 01000000 10010110 00100111 00010110 01001100 01101111 10101001 01111010 00110001 00110001 00110001 00010011 00011100 01001010 01010100 11101001 10100111 01111100 00110001 11110110 10011101 10010111 00101101 10001001 11011000 11010100 00010110 10001100 10011100 00100110 00110111 10001101 10100111 10000111 10011111 10010110 10010011 10001111 00100100 11010111 11000111 10000110 11111001 10110100 01010111 10011001 11011011 11011101 01010110 10100111 00011111 01011110 00111110 10101000 11100110 10111111 11010011 00111110 10010101 11011000 01101001 11001010 11011110 00110011 11101111 11110101 10001001 00100000 10011001 01100000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 11011001 10100110 11000111 11010011 01001110 10101001 11100110 11011111 11010011 00111110 00011100 01111111 00010010 11111011 01001111 00010001 11011110 01011011 10011011 01110010 10101111 11101010 01111110 11110111 11111110 00110000 00000111 00001010 10101111 10101000 10100101 01111000 10011110 10101001 11111011 00110111 10011001 10001000 11111011 01001111 00010101 10011011 01111101 00101101 01100000 11001101 11111100 10110111 11110111 01011001 01101101 01001101 11100111 11101001 10001000 10001111 11011010 10011011 01011010 01101101 00111011 11011010 01110111 10011001 01100001 11010010 11110001 01101000 11001000 01010011 11001011 10011101 10101011 00111011 00101000 00000001 10001011 01110110 10111101 00100111 11110001 11001111 10111010 11110110 00011010 01100101 10111110 00111000 11011010 10110011 00011011 01111010 01001100 00101110 10101110 10101010 00111111 11001110 10111111 10011000 01010001 01001110 10010101 10001000 11000100 10111101 00111001 01011010 01100110 01100110 00011010 00111001 11100101 01001101 10110001 01011010 10011101 11110000 11001110 11011111 11101011 11100001 01100101 00110010 01010110 11111111 00000000 01001101 10100010 01011101 00110100 10011000 10001011 00110001 10001001 10011010 11001011 11001110 10011110 01100111 10110110 11011111 01100100 00110110 01100111 11000101 00010111 10101100 11011010 00100011 11100110 10001111 11011011 00011010 01101011 11010110 01101011 00101011 01101001 01111000 10111100 00000000 00111000 01110110 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000011 10101010 01011010 00101011 01101000 10011001 10001101 11110110 11110000 00010010 11010111 10000110 10010001 10001011 00011111 01111110 11010011 00111101 11100101 11001110 01001101 01001100 01000111 01101010 01000110 11110011 11101011 11100001 10011110 11111001 00101101 10010010 01111110 01101001 11111100 00111000 01101011 00111101 00110010 00110010 10101100 00100011 10010110 11001110 11011001 11010101 11110010 01011010 11110011 11110011 01001110 11111111 00000000 01100111 00100000 11001011 01110101 10110100 01000110 01111101 00000000 00001111 01000000 00000000 00000000 00010010 10110110 10011010 10001011 11010111 10110101 10111110 01101000 11111101 10101001 00011110 11000100 11001100 01111101 00111001 10110101 01100010 11011111 01101101 11110100 11001011 01011100 10011111 01001100 11110111 11110100 10010110 01011101 01000110 00111110 10001100 10011011 11000111 00010110 11101110 10101101 11011100 11100101 10011011 01010011 10100110 11111101 11111101 00100111 11001100 00110100 10011011 11111001 01000110 01001011 00111010 11110011 10011010 01011011 01100011 11101001 01011000 00001100 10011011 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000011 11111111 11011001"

BITS = []

for b in bstr:
    if b in ['0', '1']:
        BITS.append(b)

# for char in word:
#     bin = list(format(ord(char), "08b"))
#     BITS += bin


total = len(BITS)
print("BITS:", ''.join(BITS))
SOCK = "/tmp/binary.sock"

try:
    Path(SOCK).unlink()
except FileNotFoundError:
    pass

server = socket.socket(socket.AF_UNIX)
server.bind(SOCK)

server.listen(1)
 # subprocess.Popen(["/home/linuxer77/Programming Stuff/GO/chessStorj/bot1/lichess-bot-master/venv/bin/python", "/home/linuxer77/Programming Stuff/GO/chessStorj/bot1/lichess-bot-master/lichess-bot.py"], cwd="/home/linuxer77/Programming Stuff/GO/chessStorj/bot1/lichess-bot-master/")
# subprocess.Popen(["/home/linuxer77/Programming Stuff/GO/chessStorj/bot2/lichess-bot-master/venv/bin/python", "/home/linuxer77/Programming Stuff/GO/chessStorj/bot2/lichess-bot-master/lichess-bot.py"], cwd="/home/linuxer77/Programming Stuff/GO/chessStorj/bot2/lichess-bot-master/")

print("Server listening")
while BITS:
    conn, _ = server.accept()
    if not BITS:
        conn.close()
        break
    bit = BITS[0] 
    print("Remaining: ", total - len(BITS))
    if bit not in ["0", "1"]:
        BITS.pop(0)
        conn.close()
        continue
    
    try:
        conn.send(bit.encode())
        response = conn.recv(1024).decode()
        BITS.pop(0)
    except Exception as e:
        print(f"Error: {e}")
    
    conn.close()

subprocess.run(["pkill", "-f", "lichess-bot.py"])
